var scripts=document.getElementsByTagName("script"),myScript=scripts[scripts.length-1],queryString=myScript.src.replace(/^[^\?]+\??/,""),params=parseQuery(queryString),infowindow=new daum.maps.InfoWindow({zIndex:1}),mapContainer=document.getElementById("map"),mapOption={center:new daum.maps.LatLng(37.566826,126.9786567),level:3},map=new daum.maps.Map(mapContainer,mapOption),ps=new daum.maps.services.Places;ps.keywordSearch(params.q,placesSearchCB);
function placesSearchCB(a,b,c){if(a===daum.maps.services.Status.OK){a=new daum.maps.LatLngBounds;for(c=0;c<b.places.length;c++)0==c&&(displayMarker(b.places[c]),a.extend(new daum.maps.LatLng(b.places[c].latitude,b.places[c].longitude)));map.setBounds(a)}}
function displayMarker(a){var b=new daum.maps.Marker({map:map,position:new daum.maps.LatLng(a.latitude,a.longitude)});daum.maps.event.addListener(b,"click",function(){infowindow.setContent('<div style="padding:5px;font-size:12px;">'+a.title+"</div>");infowindow.open(map,b)})}function parseQuery(a){var b={};if(!a)return b;a=a.split(/[;&]/);for(var c=0;c<a.length;c++){var d=a[c].split("=");if(d&&2==d.length){var e=unescape(d[0]),d=unescape(d[1]),d=d.replace(/\+/g," ");b[e]=d}}return b};